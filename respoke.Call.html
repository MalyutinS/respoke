<!-- Copyright 2014, Digium, Inc.--><!-- All rights reserved.--><!----><!-- This source code is licensed under The MIT License found in the--><!-- LICENSE file in the root directory of this source tree.--><!----><!-- For all details and documentation:  https://www.respoke.io--><!DOCTYPE html><html><head><title>respoke/call.js - respoke.Call</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><link rel="stylesheet" href="https://highlightjs.org/static/styles/github.css"><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script src="https://highlightjs.org/static/highlight.pack.js"></script><style type="text/css">#navi { z-index: 1000; max-height: 99%; overflow-y: auto; overflow-x: hidden; }
#navi .nav>li>a { padding: 3px 15px; display: inline-block; }
#navi.show { max-height: 400px; }
#navi.show #menu { background: #fff; border: 1px solid #ccc; border-radius: 5px; padding: 8px; display: block!important; }
.wrap { word-break: break-all; }</style></head><body style="position:relative" data-spy="scroll" data-target="#navi"><div id="navi" class="affix col-sm-3"><button onclick="$('#navi').toggleClass('show')" class="btn btn-default visible-xs">Menu</button><div id="menu" class="hidden-xs"><br class="hidden-xs"><ul role="tablist" class="nav nav-pills nav-stacked"><li>Properties &amp; Methods</li><li><a href="#respoke-Call">respoke.Call</a></li><li><a href="#caller">caller</a></li><li><a href="#id">id</a></li><li><a href="#enableCallDebugReport">enableCallDebugReport</a></li><li><a href="#hasAudio">hasAudio</a></li><li><a href="#hasVideo">hasVideo</a></li><li><a href="#outgoingMedia">outgoingMedia</a></li><li><a href="#incomingMedia">incomingMedia</a></li><li><a href="#answer">answer</a></li><li><a href="#approve">approve</a></li><li><a href="#getStats">getStats</a></li><li><a href="#getLocalElement">getLocalElement</a></li><li><a href="#getRemoteElement">getRemoteElement</a></li><li><a href="#getDirectConnection">getDirectConnection</a></li><li><a href="#closeDirectConnection">closeDirectConnection</a></li><li><a href="#hangup">hangup</a></li><li><a href="#reject">reject</a></li><li><a href="#isActive">isActive</a></li><li><a href="#toggleVideo">toggleVideo</a></li><li><a href="#toggleAudio">toggleAudio</a></li><li><a href="#hasMedia">hasMedia</a></li><li><a href="#muteVideo">muteVideo</a></li><li><a href="#unmuteVideo">unmuteVideo</a></li><li><a href="#muteAudio">muteAudio</a></li><li><a href="#unmuteAudio">unmuteAudio</a></li><li><a href="#log">log</a></li><li>Events</li><li><a href="#event-respoke-Call-mute">mute</a></li><li><a href="#event-respoke-Call-stats">stats</a></li><li><a href="#event-respoke-Call-answer">answer</a></li><li><a href="#event-respoke-Call-approve">approve</a></li><li><a href="#event-respoke-Call-connect">connect</a></li><li><a href="#event-respoke-Call-requesting-media">requesting-media</a></li><li><a href="#event-respoke-Call-allow">allow</a></li><li><a href="#event-respoke-Call-error">error</a></li><li><a href="#event-respoke-Call-direct-connection">direct-connection</a></li><li><a href="#event-respoke-Call-hangup">hangup</a></li><li><a href="#event-respoke-Call-modify">modify</a></li><li><a href="#event-respoke-Client-call">call</a></li></ul></div></div><div id="header" role="navigation" class="nav navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><a href="/respoke" class="navbar-brand">Respoke.js</a><button id="file-menu" data-toggle="collapse" data-target="#navbar-links" class="navbar-toggle collapsed"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="navbar-links" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="active"><a href="respoke.Call.html">Call</a></li><li><a href="respoke.Client.html">Client</a></li><li><a href="respoke.Connection.html">Connection</a></li><li><a href="respoke.DirectConnection.html">DirectConnection</a></li><li><a href="respoke.Endpoint.html">Endpoint</a></li><li><a href="respoke.EventEmitter.html">EventEmitter</a></li><li><a href="respoke.Group.html">Group</a></li><li><a href="respoke.LocalMedia.html">LocalMedia</a></li><li><a href="respoke.Presentable.html">Presentable</a></li><li><a href="respoke.RemoteMedia.html">RemoteMedia</a></li><li><a href="respoke.MediaStats.html">MediaStats</a></li></ul></div></div></div><div class="col-sm-9 col-sm-offset-3"><br class="visible-xs"><h1>respoke.Call</h1><h5 class="help-block">from respoke/call.js</h5><div id="respoke-Call" class="comment"><p><strong>extends&nbsp;<a href="respoke.EventEmitter.html"><code>respoke.EventEmitter</code></a></strong></p><div><p>A <code>respoke.Call</code> is Respoke&#39;s interface into a WebRTC call, including getUserMedia, path and codec negotation,
and call state.</p>
<p>There are several methods on an instance of <code>respoke.Client</code> which return a <code>respoke.Call</code>.</p>
</div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>params</code></div><div class="col-sm-3 wrap"><small><strong>object</strong></small></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.instanceId</code></div><div class="col-sm-3 wrap"><small><strong>string</strong></small></div><div class="col-sm-5">client id</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.caller</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">whether or not we initiated the call</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.receiveOnly]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">whether or not we accept media</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.sendOnly]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">whether or not we send media</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.needDirectConnection]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">flag to enable skipping media &amp; opening direct connection.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.forceTurn]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">If true, media is not allowed to flow peer-to-peer and must flow through
relay servers. If it cannot flow through relay servers, the call will fail.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.disableTurn]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">If true, media is not allowed to flow through relay servers; it is
required to flow peer-to-peer. If it cannot, the call will fail.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.remoteEndpoint</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Endpoint</strong></small></div><div class="col-sm-5">The endpoint who is being called.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.connectionId]</code></div><div class="col-sm-3 wrap"><small><strong>string</strong></small></div><div class="col-sm-5">The connection ID of the remoteEndpoint.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.previewLocalMedia]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.previewLocalMedia</strong></small></div><div class="col-sm-5">A function to call if the developer
wants to perform an action between local media becoming available and calling approve().</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.signalOffer</code></div><div class="col-sm-3 wrap"><small><strong>function</strong></small></div><div class="col-sm-5">Signaling action from SignalingChannel.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.signalConnected</code></div><div class="col-sm-3 wrap"><small><strong>function</strong></small></div><div class="col-sm-5">Signaling action from SignalingChannel.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.signalAnswer</code></div><div class="col-sm-3 wrap"><small><strong>function</strong></small></div><div class="col-sm-5">Signaling action from SignalingChannel.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.signalHangup</code></div><div class="col-sm-3 wrap"><small><strong>function</strong></small></div><div class="col-sm-5">Signaling action from SignalingChannel.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.signalReport</code></div><div class="col-sm-3 wrap"><small><strong>function</strong></small></div><div class="col-sm-5">Signaling action from SignalingChannel.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.signalCandidate</code></div><div class="col-sm-3 wrap"><small><strong>function</strong></small></div><div class="col-sm-5">Signaling action from SignalingChannel.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onError]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onError</strong></small></div><div class="col-sm-5">Callback for errors that happen during call setup or
media renegotiation.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onLocalMedia]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onLocalMedia</strong></small></div><div class="col-sm-5">Callback for receiving an HTML5 Video
element with the local audio and/or video attached.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onConnect]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onConnect</strong></small></div><div class="col-sm-5">Callback for the remote video element.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onHangup]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onHangup</strong></small></div><div class="col-sm-5">Callback for when the call is ended, whether or not
it was ended in a graceful manner. TODO: add the hangup reason to the Event.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onMute]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onMute</strong></small></div><div class="col-sm-5">Callback for changing the mute state on any type of media.
This callback will be called when media is muted or unmuted.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onAnswer]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onAnswer</strong></small></div><div class="col-sm-5">Callback for when the callee answers the call.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onRequestingMedia]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onRequestingMedia</strong></small></div><div class="col-sm-5">Callback for when the app is waiting
for the user to give permission to start getting audio or video.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onApprove]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onApprove</strong></small></div><div class="col-sm-5">Callback for when the user approves local media. This
callback will be called whether or not the approval was based on user feedback. I. e., it will be called even if
the approval was automatic.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onAllow]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onAllow</strong></small></div><div class="col-sm-5">Callback for when the browser gives us access to the
user's media. This event gets called even if the allow process is automatic, i. e., permission and media is
granted by the browser without asking the user to approve it.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.videoLocalElement</code></div><div class="col-sm-3 wrap"><small><strong>HTMLVideoElement</strong></small></div><div class="col-sm-5">Pass in an optional html video element to have local video attached to it.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.videoRemoteElement</code></div><div class="col-sm-3 wrap"><small><strong>HTMLVideoElement</strong></small></div><div class="col-sm-5">Pass in an optional html video element to have remote video attached to it.</div></div><br class="visible-xs"><br><br><h2>Properties and Methods</h2></div><div id="caller" class="comment"><h3><code>boolean</code><a href="#caller" class="bold">caller</a></h3><div><p>Whether or not the client is the caller of the call.</p>
</div><br><br></div><div id="id" class="comment"><h3><code>string</code><a href="#id" class="bold">id</a></h3><div><p>The call ID.</p>
</div><br><br></div><div id="enableCallDebugReport" class="comment"><h3><code>boolean</code><a href="#enableCallDebugReport" class="bold">enableCallDebugReport</a></h3><div><p>Informational property. Whether call debugs were enabled on the client during creation.
Changing this value will do nothing.</p>
</div><br><br></div><div id="hasAudio" class="comment"><h3><code>boolean</code><a href="#hasAudio" class="bold">hasAudio</a></h3><div><p>A flag indicating whether this call has audio.</p>
<p>This becomes available after the call is accepted, for the client being called only.</p>
</div><br><br></div><div id="hasVideo" class="comment"><h3><code>boolean</code><a href="#hasVideo" class="bold">hasVideo</a></h3><div><p>A flag indicating whether this call has video.</p>
<p>This becomes available after the call is accepted, for the client being called only.</p>
</div><br><br></div><div id="outgoingMedia" class="comment"><h3><code>respoke.LocalMedia</code><a href="#outgoingMedia" class="bold">outgoingMedia</a></h3><div><p>Local media that we are sending to the remote party.</p>
</div><br><br></div><div id="incomingMedia" class="comment"><h3><code>respoke.RemoteMedia</code><a href="#incomingMedia" class="bold">incomingMedia</a></h3><div><p>Remote media that we are receiving from the remote party.</p>
</div><br><br></div><div id="answer" class="comment"><h3><a href="#answer"><span class="bold">answer()</span></a></h3><p><strong>fires</strong><code>answer</code></p><div><p>Answer the call and start the process of obtaining media. This method is called automatically on the caller&#39;s
side. This method must be called on the callee&#39;s side to indicate that the endpoint does wish to accept the
call. The app will have a later opportunity, by passing a callback named previewLocalMedia, to approve or
reject the call based on whether audio and/or video is working and is working at an acceptable level.</p>
<pre><code>client.listen(&#39;call&#39;, function (evt) {
    if (!evt.call.caller) {
        evt.call.answer();
    }
});
</code></pre></div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>[params]</code></div><div class="col-sm-3 wrap"><small><strong>object</strong></small></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.previewLocalMedia]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.previewLocalMedia</strong></small></div><div class="col-sm-5">A function to call if the developer
wants to perform an action between local media becoming available and calling approve().</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onLocalMedia]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onLocalMedia</strong></small></div><div class="col-sm-5">Callback for receiving an HTML5 Video
element with the local audio and/or video attached.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onConnect]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onConnect</strong></small></div><div class="col-sm-5">Callback for the remote video element.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onHangup]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onHangup</strong></small></div><div class="col-sm-5">Callback for when the call is ended, whether or not
it was ended in a graceful manner. TODO: add the hangup reason to the Event.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onMute]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onMute</strong></small></div><div class="col-sm-5">Callback for changing the mute state on any type of media.
This callback will be called when media is muted or unmuted.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onAnswer]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onAnswer</strong></small></div><div class="col-sm-5">Callback for when the callee answers the call.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onRequestingMedia]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onRequestingMedia</strong></small></div><div class="col-sm-5">Callback for when the app is waiting
for the user to give permission to start getting audio or video.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onApprove]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onApprove</strong></small></div><div class="col-sm-5">Callback for when the user approves local media. This
callback will be called whether or not the approval was based on user feedback. I. e., it will be called even if
the approval was automatic.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onAllow]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.onAllow</strong></small></div><div class="col-sm-5">Callback for when the browser gives us access to the
user's media. This event gets called even if the allow process is automatic, i. e., permission and media is
granted by the browser without asking the user to approve it.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.disableTurn]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">If true, media is not allowed to flow through relay servers; it is
required to flow peer-to-peer. If it cannot, the call will fail.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.receiveOnly]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">Whether or not we accept media.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.sendOnly]</code></div><div class="col-sm-3 wrap"><small><strong>boolean</strong></small></div><div class="col-sm-5">Whether or not we send media.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.constraints]</code></div><div class="col-sm-3 wrap"><small><strong>object</strong></small></div><div class="col-sm-5">Information about the media for this call.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.videoLocalElement</code></div><div class="col-sm-3 wrap"><small><strong>HTMLVideoElement</strong></small></div><div class="col-sm-5">Pass in an optional html video element to have local video attached to it.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>params.videoRemoteElement</code></div><div class="col-sm-3 wrap"><small><strong>HTMLVideoElement</strong></small></div><div class="col-sm-5">Pass in an optional html video element to have remote video attached to it.</div></div><br class="visible-xs"><br><br></div><div id="approve" class="comment"><h3><a href="#approve"><span class="bold">approve()</span></a></h3><p><strong>fires</strong><code>approve</code></p><div><p>Start the process of network and media negotiation. If the app passes in a callback named previewLocalMedia
in order to allow the logged-in person a chance to base their decision to continue the call on whether
audio and/or video is working correctly,
this method must be called on both sides in order to begin the call. If call.approve() is called, the call
will progress as expected. If call.reject() is called, the call will be aborted.</p>
<pre><code>call.listen(&#39;local-stream-received&#39;, function (evt) {
    if (userLikesVideo()) {
        evt.call.approve();
    }
});
</code></pre></div><br><br></div><div id="getStats" class="comment"><h3><code>function</code><a href="#getStats" class="bold">getStats</a></h3><div><h2 id="the-plugin-respoke-mediastats-must-be-loaded-before-using-this-method-">The plugin <code>respoke.MediaStats</code> must be loaded before using this method.</h2>
<p>Start the process of listening for a continuous stream of statistics about the flow of audio and/or video.
Since we have to wait for both the answer and offer to be available before starting
statistics, the library returns a promise for the stats object. The statistics object does not contain the
statistics; rather it contains methods of interacting with the actions of obtaining statistics. To obtain
the actual statistics one time, use stats.getStats(); use the onStats callback to obtain a continuous
stream of statistics every <code>interval</code> seconds.  Returns null if stats module is not loaded.</p>
<pre><code>call.getStats({
    onStats: function (evt) {
        console.log(&#39;Stats&#39;, evt.stats);
    }
}).done(function () {
    console.log(&#39;Stats started&#39;);
}, function (err) {
    console.log(&#39;Call is already hung up.&#39;);
});
</code></pre></div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>params</code></div><div class="col-sm-3 wrap"><small><strong>object</strong></small></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.interval=5000]</code></div><div class="col-sm-3 wrap"><small><strong>number</strong></small></div><div class="col-sm-5">How often in milliseconds to fetch statistics.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onStats]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.MediaStatsParser.statsHandler</strong></small></div><div class="col-sm-5">An optional callback to receive
the stats. If no callback is provided, the call's report will contain stats but the developer will not
receive them on the client-side.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onSuccess]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.statsSuccessHandler</strong></small></div><div class="col-sm-5">Success handler for this invocation of
this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>[params.onError]</code></div><div class="col-sm-3 wrap"><small><strong>respoke.Call.errorHandler</strong></small></div><div class="col-sm-5">Error handler for this invocation of this method only.</div></div><br class="visible-xs"><br><br></div><div id="getLocalElement" class="comment"><h3><a href="#getLocalElement"><span class="bold">getLocalElement()</span></a></h3><p><strong>returns<code>Video</code></strong></p><div><p>Return local video element with the logged-in endpoint&#39;s audio and/or video streams attached to it.</p>
<pre><code>var el = call.getLocalElement();
container.append(el);
</code></pre></div><br><br></div><div id="getRemoteElement" class="comment"><h3><a href="#getRemoteElement"><span class="bold">getRemoteElement()</span></a></h3><p><strong>returns<code>Video</code></strong></p><div><p>Return remote video element with the remote endpoint&#39;s audio and/or video streams attached to it.</p>
<pre><code>var el = call.getRemoteElement();
container.append(el);
</code></pre></div><br><br></div><div id="getDirectConnection" class="comment"><h3><a href="#getDirectConnection"><span class="bold">getDirectConnection()</span></a></h3><p><strong>returns<code>respoke.DirectConnection</code></strong></p><div><p>Get the direct connection on this call, if it exists.</p>
<pre><code>var dc = call.getDirectConnection();
if (!dc) {
    console.log(&quot;No direct connection has been started.&quot;);
} else {
    dc.sendMessage({message: &#39;hi&#39;});
}
</code></pre></div><br><br></div><div id="closeDirectConnection" class="comment"><h3><a href="#closeDirectConnection"><span class="bold">closeDirectConnection()</span></a></h3><div><p>Close the direct connection.</p>
</div><br><br></div><div id="hangup" class="comment"><h3><a href="#hangup"><span class="bold">hangup(params)</span></a></h3><p><strong>fires</strong><code>hangup</code></p><div><p>Tear down the call, release user media.  Send a hangup signal to the remote party if
signal is not false and we have not received a hangup signal from the remote party.</p>
</div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>params</code></div><div class="col-sm-3 wrap"><small><strong>object</strong></small></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="reject" class="comment"><h3><a href="#reject"><span class="bold">reject(params)</span></a></h3><div><p>Expose hangup as reject for approve/reject workflow.</p>
</div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>params</code></div><div class="col-sm-3 wrap"><small><strong>object</strong></small></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="isActive" class="comment"><h3><a href="#isActive"><span class="bold">isActive()</span></a></h3><p><strong>returns<code>boolean</code></strong></p><div><p>Indicate whether a call is being setup or is in progress.</p>
</div><br><br></div><div id="toggleVideo" class="comment"><h3><a href="#toggleVideo"><span class="bold">toggleVideo()</span></a></h3><div><p>If video is muted, unmute. If not muted, mute.</p>
</div><br><br></div><div id="toggleAudio" class="comment"><h3><a href="#toggleAudio"><span class="bold">toggleAudio()</span></a></h3><div><p>If audio is muted, unmute. If not muted, mute.</p>
</div><br><br></div><div id="hasMedia" class="comment"><h3><a href="#hasMedia"><span class="bold">hasMedia()</span></a></h3><p><strong>returns<code>boolean</code></strong></p><div><p>Indicate whether the call has media flowing.</p>
</div><br><br></div><div id="muteVideo" class="comment"><h3><a href="#muteVideo"><span class="bold">muteVideo()</span></a></h3><p><strong>fires</strong><code>mute</code></p><div><p>Mute all local video streams.</p>
</div><br><br></div><div id="unmuteVideo" class="comment"><h3><a href="#unmuteVideo"><span class="bold">unmuteVideo()</span></a></h3><p><strong>fires</strong><code>mute</code></p><div><p>Unmute all local video streams.</p>
</div><br><br></div><div id="muteAudio" class="comment"><h3><a href="#muteAudio"><span class="bold">muteAudio()</span></a></h3><p><strong>fires</strong><code>mute</code></p><div><p>Mute all local audio streams.</p>
</div><br><br></div><div id="unmuteAudio" class="comment"><h3><a href="#unmuteAudio"><span class="bold">unmuteAudio()</span></a></h3><p><strong>fires</strong><code>mute</code></p><div><p>Unmute all local audio streams.</p>
</div><br><br></div><div id="log" class="comment"><h3><a href="#log"><span class="bold">log()</span></a></h3><div><p>Copyright 2014, Digium, Inc.
All rights reserved.</p>
<p>This source code is licensed under The MIT License found in the
LICENSE file in the root directory of this source tree.</p>
<p>For all details and documentation:  <a href="https://www.respoke.io">https://www.respoke.io</a></p>
</div><br><br></div><br><br><h2>Events</h2><p>Listen for events on an instance of this class.</p><pre><code>Call
.listen(&quot;event-name&quot;, function (evt) {

})</code></pre><br><div id="event-respoke-Call-mute"><h3><code>event</code> <a href="#event-respoke-Call-mute" class="bold">mute</a></h3><div><p>This event indicates that local video has been unmuted.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>type</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">Either &quot;audio&quot; or &quot;video&quot; to specify the type of stream whose muted state
has been changed.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>muted</code></div><div class="col-sm-3 wrap"><strong>boolean</strong></div><div class="col-sm-5">Whether the stream is now muted. Will be set to false if mute was turned off.</div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-stats"><h3><code>event</code> <a href="#event-respoke-Call-stats" class="bold">stats</a></h3><div><p>This event is fired every time statistical information about audio and/or video on a call
becomes available.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>stats</code></div><div class="col-sm-3 wrap"><strong>respoke.MediaStats</strong></div><div class="col-sm-5">an object with stats in it.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-answer"><h3><code>event</code> <a href="#event-respoke-Call-answer" class="bold">answer</a></h3><div><p>The call was answered.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-approve"><h3><code>event</code> <a href="#event-respoke-Call-approve" class="bold">approve</a></h3><div><p>Fired when the local media access is approved.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-connect"><h3><code>event</code> <a href="#event-respoke-Call-connect" class="bold">connect</a></h3><div><p>Indicates that a remote media stream has been added to the call.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>element</code></div><div class="col-sm-3 wrap"><strong>Element</strong></div><div class="col-sm-5">The HTML5 Video element with the remote stream attached.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>stream</code></div><div class="col-sm-3 wrap"><strong>respoke.RemoteMedia</strong></div><div class="col-sm-5">The incomingMedia property on the call.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">The event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-requesting-media"><h3><code>event</code> <a href="#event-respoke-Call-requesting-media" class="bold">requesting-media</a></h3><div><p>The browser is asking for permission to access the User&#39;s media. This would be an ideal time
to modify the UI of the application so that the user notices the request for permissions
and approves it.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-allow"><h3><code>event</code> <a href="#event-respoke-Call-allow" class="bold">allow</a></h3><div><p>The user has approved the request for media. Any UI changes made to remind the user to click Allow
should be canceled now. This event is the same as the <code>onAllow</code> callback.  This event gets fired
even if the allow process is automatic, i. e., permission and media is granted by the browser
without asking the user to approve it.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-error"><h3><code>event</code> <a href="#event-respoke-Call-error" class="bold">error</a></h3><div><p>This event is fired on errors that occur during call setup or media negotiation.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>reason</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">A human readable description about the error.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-direct-connection"><h3><code>event</code> <a href="#event-respoke-Call-direct-connection" class="bold">direct-connection</a></h3><div><p>This event is fired when the local end of the directConnection is available. It still will not be
ready to send and receive messages until the &#39;open&#39; event fires.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>directConnection</code></div><div class="col-sm-3 wrap"><strong>respoke.DirectConnection</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>endpoint</code></div><div class="col-sm-3 wrap"><strong>respoke.Endpoint</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-hangup"><h3><code>event</code> <a href="#event-respoke-Call-hangup" class="bold">hangup</a></h3><div><p>This event is fired when the call has hung up.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>sentSignal</code></div><div class="col-sm-3 wrap"><strong>boolean</strong></div><div class="col-sm-5">Whether or not we sent a 'hangup' signal to the other party.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Call-modify"><h3><code>event</code> <a href="#event-respoke-Call-modify" class="bold">modify</a></h3><div><p>Indicates a request to add something to an existing call. If &#39;constraints&#39; is set, evt.constraints
describes the media the other side has added. In this case, call.approve() must be called in order
to approve the new media and send the same type of media.  If directConnection exists, the other side
wishes to to open a direct connection. In order to approve, call directConnection.accept(). In either
case, call.reject() and directConnection.reject() can be called to decline the request to add to the
call.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>constraints</code></div><div class="col-sm-3 wrap"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>directConnection</code></div><div class="col-sm-3 wrap"><strong>boolean</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Client-call"><h3><code>event</code> <a href="#event-respoke-Client-call" class="bold">call</a></h3><div><p>This event provides notification for when an incoming call is being received.  If the user wishes
to allow the call, the app should call evt.call.answer() to answer the call.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4 wrap"><code>call</code></div><div class="col-sm-3 wrap"><strong>respoke.Call</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>endpoint</code></div><div class="col-sm-3 wrap"><strong>respoke.Endpoint</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>name</code></div><div class="col-sm-3 wrap"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4 wrap"><code>target</code></div><div class="col-sm-3 wrap"><strong>respoke.Client</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div style="height:1000px"></div></div><script>hljs.initHighlightingOnLoad();
$(document).on('scroll', setSidebarPosition);
$(window).on('resize', setSidebarPosition);
$('#file-menu').on('click', function () {
  setTimeout(setSidebarPosition, 350);
});
function setSidebarPosition() {
  var s = $(document).scrollTop();
  var h = $('#header').height();
  if (s < h) {
      $('#navi').css('top', ((h - s) + 8) + 'px');
  } else {
      $('#navi').css('top', '0');
  }
}
setSidebarPosition();</script></body></html>