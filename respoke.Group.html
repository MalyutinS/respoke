<!-- Copyright 2014, Digium, Inc.--><!-- All rights reserved.--><!----><!-- This source code is licensed under The MIT License found in the--><!-- LICENSE file in the root directory of this source tree.--><!----><!-- For all details and documentation:  https://www.respoke.io--><!DOCTYPE html><html><head><title>respoke/group.js - respoke.Group</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"><link rel="stylesheet" href="https://highlightjs.org/static/styles/github.css"><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script src="https://highlightjs.org/static/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="container"><div id="respoke-Group" class="comment"><p><strong>extends&nbsp;<a href="/js-library/respoke.EventEmitter.html"><code>respoke.EventEmitter</code></a></strong></p><div><p>A <code>respoke.Group</code> represents a collection of endpoints.</p>
<p>There are methods to communicate with the endpoints at the group level and track
their presence in the group.</p>
</div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.instanceId</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onJoin</code></div><div class="col-sm-3"><strong>respoke.Group.onJoin</strong></div><div class="col-sm-5">A callback to receive notifications every time a new
endpoint has joined the group. This callback does not get called when the client joins the group.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onMessage</code></div><div class="col-sm-3"><strong>respoke.Group.onMessage</strong></div><div class="col-sm-5">A callback to receive messages sent to the group from
remote endpoints.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onLeave</code></div><div class="col-sm-3"><strong>respoke.Group.onLeave</strong></div><div class="col-sm-5">A callback to receive notifications every time a new
endpoint has left the group. This callback does not get called when the client leaves the group.</div></div><br class="visible-xs"><br><br><h2>Properties and Methods</h2></div><div id="connections" class="comment"><h3><code>array&lt;respoke.Connection&gt;</code><a href="#connections" class="bold"> respoke.Group.connections</a></h3><div><p>The connections to members of this group.</p>
</div><br><br></div><div id="join" class="comment"><h3><a href="#join"><span class="bold"> respoke.Group.join(params)</span></a></h3><p><strong>returns<code>Promise|undefined</code></strong></p><p><strong>fires</strong><code>respoke.Client#join</code></p><div><p>Join this group.</p>
<pre><code>group.join().done(function () {
    group.sendMessage({
        message: &quot;Hey, ppl! I&#39;m here!&quot;
    });
}, function (err) {
    // Couldn&#39;t join the group, possibly permissions error
});
</code></pre><p><strong>Using callbacks</strong> will disable promises.</p>
</div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>[params.onSuccess]</code></div><div class="col-sm-3"><strong>respoke.Client.joinHandler</strong></div><div class="col-sm-5">Success handler for this invocation of
this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>[params.onError]</code></div><div class="col-sm-3"><strong>respoke.Client.errorHandler</strong></div><div class="col-sm-5">Error handler for this invocation of this
method only.</div></div><br class="visible-xs"><br><br></div><div id="leave" class="comment"><h3><a href="#leave"><span class="bold"> respoke.Group.leave(params)</span></a></h3><p><strong>returns<code>Promise|undefined</code></strong></p><p><strong>fires</strong><code>respoke.Client#leave</code></p><div><p>Leave this group.</p>
<pre><code>group.leave({
    onSuccess: function () {
        // good riddance
    },
    onError: function (err) {
        // Couldn&#39;t leave the group, possibly a permissions error
    }
});
</code></pre></div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>[params.onSuccess]</code></div><div class="col-sm-3"><strong>respoke.Client.joinHandler</strong></div><div class="col-sm-5">Success handler for this invocation of
this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>[params.onError]</code></div><div class="col-sm-3"><strong>respoke.Client.errorHandler</strong></div><div class="col-sm-5">Error handler for this invocation of this
method only.</div></div><br class="visible-xs"><br><br></div><div id="isJoined" class="comment"><h3><a href="#isJoined"><span class="bold"> respoke.Group.isJoined()</span></a></h3><p><strong>returns<code>boolean</code></strong></p><div><p>Return true if the logged-in user is a member of this group and false if not.</p>
<pre><code>if (group.isJoined()) {
    // I&#39;m a member!
} else {
    // Maybe join here
}
</code></pre></div><br><br></div><div id="sendMessage" class="comment"><h3><a href="#sendMessage"><span class="bold"> respoke.Group.sendMessage(params)</span></a></h3><p><strong>returns<code>Promise</code></strong></p><div><p>Send a message to all of the endpoints in the group.</p>
<pre><code> var group = client.getGroup({ id: &#39;js-enthusiasts&#39;});

 group.sendMessage({
     message: &quot;Cat on keyboard&quot;,
     onSuccess: function (evt) {
         console.log(&#39;Message was sent&#39;);
     }
 });
</code></pre></div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.message</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">The message.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onSuccess</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Success handler indicating that the message was delivered.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>params.onError</code></div><div class="col-sm-3"><strong>function</strong></div><div class="col-sm-5">Error handler indicating that the message was not delivered.</div></div><br class="visible-xs"><br><br></div><div id="getMembers" class="comment"><h3><a href="#getMembers"><span class="bold"> respoke.Group.getMembers(params)</span></a></h3><p><strong>returns<code>Promise&lt;Array&gt;</code></strong></p><div><p>Get group members</p>
<p>Get an array containing the members of the group. Accepts <code>onSuccess</code> or <code>onError</code> parameters,
or a promise.</p>
<pre><code>group.getMembers({
    onSuccess: function (members) {
        members.forEach(function (member) {
            // do something
        });
    }
});
</code></pre></div><br><h4>Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>params</code></div><div class="col-sm-3"><strong>object</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>[params.onSuccess]</code></div><div class="col-sm-3"><strong>respoke.Client.joinHandler</strong></div><div class="col-sm-5">Success handler for this invocation of this method only.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>[params.onError]</code></div><div class="col-sm-3"><strong>respoke.Client.errorHandler</strong></div><div class="col-sm-5">Success handler for this invocation of this method only.</div></div><br class="visible-xs"><br><br></div><div id="log" class="comment"><h3><a href="#log"><span class="bold"> respoke.Group.log()</span></a></h3><div><p>Copyright 2014, Digium, Inc.
All rights reserved.</p>
<p>This source code is licensed under The MIT License found in the
LICENSE file in the root directory of this source tree.</p>
<p>For all details and documentation:  <a href="https://www.respoke.io">https://www.respoke.io</a></p>
</div><br><br></div><br><br><h2>Events</h2><p>Listen for events on an instance of this class.</p><pre><code>respoke.Group</code></pre><br><div id="event-respoke-Group-message"><h3><code>event</code> <a href="#event-respoke-Group-message" class="bold">respoke.Group#message</a></h3><div><p>Indicates that a message has been sent to this group.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>message</code></div><div class="col-sm-3"><strong>respoke.TextMessage</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">The event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>target</code></div><div class="col-sm-3"><strong>respoke.Group</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Group-leave"><h3><code>event</code> <a href="#event-respoke-Group-leave" class="bold">respoke.Group#leave</a></h3><div><p>This event is fired when a member leaves a group the client is a member of.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>connection</code></div><div class="col-sm-3"><strong>respoke.Connection</strong></div><div class="col-sm-5">The connection that left the group.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">The event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>target</code></div><div class="col-sm-3"><strong>respoke.Group</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div><div id="event-respoke-Group-join"><h3><code>event</code> <a href="#event-respoke-Group-join" class="bold">respoke.Group#join</a></h3><div><p>This event is fired when a member joins a Group that the currently logged-in endpoint is a member
of.</p>
</div><br><h4>Callback Arguments</h4><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>connection</code></div><div class="col-sm-3"><strong>respoke.Connection</strong></div><div class="col-sm-5">The connection that joined the group.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">The event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>target</code></div><div class="col-sm-3"><strong>respoke.Group</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"><br><br></div></div></body></html>